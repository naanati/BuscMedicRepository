!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("history")):"function"==typeof define&&define.amd?define(["exports","react","history"],t):t((e=e||self).ReactRouter={},e.React,e.HistoryLibrary)}(this,(function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!e)throw new Error(t)}const l=t.createContext(null),i=t.createContext(null),o=t.createContext({outlet:null,params:{},pathname:"/",route:null});function u(e){return f()}function s(e){let{action:r=n.Action.Pop,basename:o="/",children:u=null,location:s,navigator:h,static:p=!1}=e;c()&&a(!1);let f=I(o),m=t.useMemo(()=>({basename:f,navigator:h,static:p}),[f,h,p]);"string"==typeof s&&(s=n.parsePath(s));let{pathname:d="/",search:v="",hash:g="",state:x=null,key:y="default"}=s,C=t.useMemo(()=>{let e=W(d,f);return null==e?null:{pathname:e,search:v,hash:g,state:x,key:y}},[f,d,v,g,x,y]);return null==C?null:t.createElement(l.Provider,{value:m},t.createElement(i.Provider,{children:u,value:{action:r,location:C}}))}function c(){return null!=t.useContext(i)}function h(){return c()||a(!1),t.useContext(i).location}function p(){c()||a(!1);let{basename:e,navigator:n}=t.useContext(l),{pathname:r}=t.useContext(o),{pathname:i}=h(),u=t.useRef(!1);return t.useEffect(()=>{u.current=!0}),t.useCallback((function(t,a){if(void 0===a&&(a={}),!u.current)return;if("number"==typeof t)return void n.go(t);let l=M(t,r,i);"/"!==e&&(l.pathname=w([e,l.pathname])),(a.replace?n.replace:n.push)(l,a.state)}),[e,n,r,i])}function f(){return t.useContext(o).outlet}function m(e){let{pathname:n}=h(),{pathname:r}=t.useContext(o);return t.useMemo(()=>M(e,r,n),[e,r,n])}function d(e,r){c()||a(!1);let{params:l,pathname:i,route:u}=t.useContext(o),s=h(),p=(r?"string"==typeof r?n.parsePath(r):r:s).pathname||"/",f=$(i,l),m=g(e,{pathname:"/"===f?p:p.slice(f.length)});return E(m&&m.map(e=>Object.assign({},e,{pathname:w([f,e.pathname])})))}function v(e){let n=[];return t.Children.forEach(e,e=>{if(!t.isValidElement(e))return;if(e.type===t.Fragment)return void n.push.apply(n,v(e.props.children));let r={path:e.props.path,caseSensitive:e.props.caseSensitive,index:e.props.index,element:e.props.element};e.props.children&&(r.children=v(e.props.children)),n.push(r)}),n}function g(e,t,r){void 0===r&&(r="/");let l=W(("string"==typeof t?n.parsePath(t):t).pathname||"/",r);if(null==l)return null;let i=function e(t,n,r,l){void 0===n&&(n=[]);void 0===r&&(r=[]);void 0===l&&(l="");return t.forEach((t,i)=>{let o={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:i};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(l)||a(!1),o.relativePath=o.relativePath.slice(l.length));let u=w([l,o.relativePath]),s=r.concat(o);t.children&&t.children.length>0&&(!0===t.index&&a(!1),e(t.children,n,s,u)),n.push({path:u,score:C(u),routesMeta:s})}),n}(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let t=0;null==o&&t<i.length;++t)o=P(i[t],e,l);return o}const x=/^:\w+$/,y=e=>"*"===e;function C(e){let t=e.split("/"),n=t.length;return t.some(y)&&(n+=-2),t.filter(e=>!y(e)).reduce((e,t)=>e+(x.test(t)?2:""===t?1:10),n)}function P(e,t,n){let r=t,{routesMeta:a}=e,l={},i="/",o=[];for(let e=0;e<a.length;++e){let t=a[e],u="/"===i?n:n.slice(i.length)||"/",s=R({path:t.relativePath,caseSensitive:t.caseSensitive,end:e===a.length-1},u);if(!s)return null;Object.assign(l,s.params);let c=r[t.childrenIndex];o.push({params:l,pathname:"/"===s.pathname?i:w([i,s.pathname]),route:c});let h=$(s.pathname,s.params);"/"!==h&&(i=w([i,h])),r=c.children}return o}function E(e){return null==e?null:e.reduceRight((e,n)=>t.createElement(o.Provider,{children:n.route.element||t.createElement(u,null),value:{outlet:e,params:n.params,pathname:n.pathname,route:n.route}}),null)}function R(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);let r=[],a="^"+e.replace(/\/?\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"));e.endsWith("*")?(e.endsWith("/*")?a+="(?:\\/(.+)|\\/?)$":a+="(.*)$",r.push("*")):a+=n?"\\/?$":"(?:\\b|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],i=a.slice(1);return{params:r.reduce((e,t,n)=>(e[t]=function(e,t){try{return decodeURIComponent(e)}catch(t){return e}}(i[n]||""),e),{}),pathname:l,pattern:e}}function b(e,t){void 0===t&&(t="/");let{pathname:r,search:a="",hash:l=""}="string"==typeof e?n.parsePath(e):e;return{pathname:r?r.startsWith("/")?r:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(r,t):t,search:O(a),hash:j(l)}}function M(e,t,n){return b(e,null==S(e)?n:t)}function S(e){return""===e||""===e.pathname?"/":"string"==typeof e?n.parsePath(e).pathname:e.pathname}function $(e,t){let n=t["*"];if(!n)return e;let r=e.slice(0,-n.length);if(n.startsWith("/"))return r;let a=r.lastIndexOf("/");return a>0?r.slice(0,a):"/"}function W(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}const w=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",j=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";e.MemoryRouter=function(e){let{basename:r,children:a,initialEntries:l,initialIndex:i}=e,o=t.useRef();null==o.current&&(o.current=n.createMemoryHistory({initialEntries:l,initialIndex:i}));let u=o.current,[c,h]=t.useState({action:u.action,location:u.location});return t.useLayoutEffect(()=>u.listen(h),[u]),t.createElement(s,{basename:r,children:a,action:c.action,location:c.location,navigator:u})},e.Navigate=function(e){let{to:n,replace:r,state:l}=e;c()||a(!1);let i=p();return t.useEffect(()=>{i(n,{replace:r,state:l})}),null},e.Outlet=u,e.Route=function(e){a(!1)},e.Router=s,e.Routes=function(e){let{children:t,location:n}=e;return d(v(t),n)},e.UNSAFE_LocationContext=i,e.UNSAFE_NavigationContext=l,e.UNSAFE_RouteContext=o,e.createRoutesFromChildren=v,e.generatePath=function(e,t){return void 0===t&&(t={}),e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&a(!1),t[n])).replace(/\/*\*$/,e=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))},e.matchPath=R,e.matchRoutes=g,e.renderMatches=E,e.resolvePath=b,e.useBlocker=function(e,n){void 0===n&&(n=!0),c()||a(!1);let{navigator:i}=t.useContext(l);t.useEffect(()=>{if(!n)return;let t=i.block(n=>{let a=r({},n,{retry(){t(),n.retry()}});e(a)});return t},[i,e,n])},e.useHref=function(e){c()||a(!1);let{basename:n,navigator:r}=t.useContext(l),i=m(e);if("/"!==n){let t=S(e),r=null!=t&&t.endsWith("/");i.pathname="/"===i.pathname?n+(r?"/":""):w([n,i.pathname])}return r.createHref(i)},e.useInRouterContext=c,e.useLocation=h,e.useMatch=function(e){return c()||a(!1),R(e,h().pathname)},e.useNavigate=p,e.useOutlet=f,e.useParams=function(){return t.useContext(o).params},e.useResolvedPath=m,e.useRoutes=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-router.production.min.js.map
