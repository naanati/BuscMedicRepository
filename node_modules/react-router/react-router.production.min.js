import{createContext as e,useRef as t,useState as n,useLayoutEffect as r,createElement as a,useContext as l,useEffect as i,useMemo as u,useCallback as o,Children as c,isValidElement as s,Fragment as h}from"react";import{createMemoryHistory as p,Action as f,parsePath as m}from"history";function d(e,t){if(!e)throw new Error(t)}const g=e(null),v=e(null),y=e({outlet:null,params:{},pathname:"/",route:null});function x({basename:e,children:l,initialEntries:i,initialIndex:u}){let o=t();null==o.current&&(o.current=p({initialEntries:i,initialIndex:u}));let c=o.current,[s,h]=n({action:c.action,location:c.location});return r(()=>c.listen(h),[c]),a($,{basename:e,children:l,action:s.action,location:s.location,navigator:c})}function b({to:e,replace:t,state:n}){I()||d(!1);let r=A();return i(()=>{r(e,{replace:t,state:n})}),null}function P(e){return M()}function S(e){d(!1)}function $({action:e=f.Pop,basename:t="/",children:n=null,location:r,navigator:l,static:i=!1}){I()&&d(!1);let o=V(t),c=u(()=>({basename:o,navigator:l,static:i}),[o,l,i]);"string"==typeof r&&(r=m(r));let{pathname:s="/",search:h="",hash:p="",state:y=null,key:x="default"}=r,b=u(()=>{let e=Q(s,o);return null==e?null:{pathname:e,search:h,hash:p,state:y,key:x}},[o,s,h,p,y,x]);return null==b?null:a(g.Provider,{value:c},a(v.Provider,{children:n,value:{action:e,location:b}}))}function E({children:e,location:t}){return U(k(e),t)}function W(e,t=!0){I()||d(!1);let{navigator:n}=l(g);i(()=>{if(!t)return;let r=n.block(t=>{let n={...t,retry(){r(),t.retry()}};e(n)});return r},[n,e,t])}function w(e){I()||d(!1);let{basename:t,navigator:n}=l(g),r=R(e);if("/"!==t){let n=J(e),a=null!=n&&n.endsWith("/");r.pathname="/"===r.pathname?t+(a?"/":""):T([t,r.pathname])}return n.createHref(r)}function I(){return null!=l(v)}function C(){return I()||d(!1),l(v).location}function j(e){return I()||d(!1),B(e,C().pathname)}function A(){I()||d(!1);let{basename:e,navigator:n}=l(g),{pathname:r}=l(y),{pathname:a}=C(),u=t(!1);return i(()=>{u.current=!0}),o((t,l={})=>{if(!u.current)return;if("number"==typeof t)return void n.go(t);let i=G(t,r,a);"/"!==e&&(i.pathname=T([e,i.pathname])),(l.replace?n.replace:n.push)(i,l.state)},[e,n,r,a])}function M(){return l(y).outlet}function N(){return l(y).params}function R(e){let{pathname:t}=C(),{pathname:n}=l(y);return u(()=>G(e,n,t),[e,n,t])}function U(e,t){I()||d(!1);let{params:n,pathname:r,route:a}=l(y),i=C(),u=(t?"string"==typeof t?m(t):t:i).pathname||"/",o=K(r,n),c=L(e,{pathname:"/"===o?u:u.slice(o.length)});return z(c&&c.map(e=>Object.assign({},e,{pathname:T([o,e.pathname])})))}function k(e){let t=[];return c.forEach(e,e=>{if(!s(e))return;if(e.type===h)return void t.push.apply(t,k(e.props.children));let n={path:e.props.path,caseSensitive:e.props.caseSensitive,index:e.props.index,element:e.props.element};e.props.children&&(n.children=k(e.props.children)),t.push(n)}),t}function F(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>(null==t[n]&&d(!1),t[n])).replace(/\/*\*$/,e=>null==t["*"]?"":t["*"].replace(/^\/*/,"/"))}function L(e,t,n="/"){let r=Q(("string"==typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let a=function e(t,n=[],r=[],a=""){return t.forEach((t,l)=>{let i={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:l};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(a)||d(!1),i.relativePath=i.relativePath.slice(a.length));let u=T([a,i.relativePath]),o=r.concat(i);t.children&&t.children.length>0&&(!0===t.index&&d(!1),e(t.children,n,o,u)),n.push({path:u,score:H(u),routesMeta:o})}),n}(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let l=null;for(let i=0;null==l&&i<a.length;++i)l=q(a[i],e,r);return l}const O=/^:\w+$/,_=e=>"*"===e;function H(e){let t=e.split("/"),n=t.length;return t.some(_)&&(n+=-2),t.filter(e=>!_(e)).reduce((e,t)=>e+(O.test(t)?2:""===t?1:10),n)}function q(e,t,n){let r=t,{routesMeta:a}=e,l={},i="/",u=[];for(let o=0;o<a.length;++o){let e=a[o],t="/"===i?n:n.slice(i.length)||"/",c=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:o===a.length-1},t);if(!c)return null;Object.assign(l,c.params);let s=r[e.childrenIndex];u.push({params:l,pathname:"/"===c.pathname?i:T([i,c.pathname]),route:s});let h=K(c.pathname,c.params);"/"!==h&&(i=T([i,h])),r=s.children}return u}function z(e){return null==e?null:e.reduceRight((e,t)=>a(y.Provider,{children:t.route.element||a(P,null),value:{outlet:e,params:t.params,pathname:t.pathname,route:t.route}}),null)}function B(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){let r=[],a="^"+e.replace(/\/?\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"));e.endsWith("*")?(e.endsWith("/*")?a+="(?:\\/(.+)|\\/?)$":a+="(.*)$",r.push("*")):a+=n?"\\/?$":"(?:\\b|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],i=a.slice(1);return{params:r.reduce((e,t,n)=>(e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(i[n]||""),e),{}),pathname:l,pattern:e}}function D(e,t="/"){let{pathname:n,search:r="",hash:a=""}="string"==typeof e?m(e):e;return{pathname:n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t,search:X(r),hash:Y(a)}}function G(e,t,n){return D(e,null==J(e)?n:t)}function J(e){return""===e||""===e.pathname?"/":"string"==typeof e?m(e).pathname:e.pathname}function K(e,t){let n=t["*"];if(!n)return e;let r=e.slice(0,-n.length);if(n.startsWith("/"))return r;let a=r.lastIndexOf("/");return a>0?r.slice(0,a):"/"}function Q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}const T=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Y=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";export{x as MemoryRouter,b as Navigate,P as Outlet,S as Route,$ as Router,E as Routes,v as UNSAFE_LocationContext,g as UNSAFE_NavigationContext,y as UNSAFE_RouteContext,k as createRoutesFromChildren,F as generatePath,B as matchPath,L as matchRoutes,z as renderMatches,D as resolvePath,W as useBlocker,w as useHref,I as useInRouterContext,C as useLocation,j as useMatch,A as useNavigate,M as useOutlet,N as useParams,R as useResolvedPath,U as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
